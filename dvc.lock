schema: '2.0'
stages:
  preprocess:
    cmd: python src/data_preprocessing.py
    deps:
    - path: data/raw/train.csv
      hash: md5
      md5: 2309cc5f04782ed9bb6016d9f4e381cf
      size: 61194
      isexec: true
    - path: params.yaml
      hash: md5
      md5: f4923fdef6ab1424f1c43fe61411067c
      size: 1616
      isexec: true
    - path: src/data_preprocessing.py
      hash: md5
      md5: 37c72a444708482c9e75413dc47617bf
      size: 3090
      isexec: true
    outs:
    - path: data/processed/titanic_preprocessed/processed_train.parquet
      hash: md5
      md5: df180f1353e74c0b63a82cbb76b481c7.dir
      size: 7579
      nfiles: 4
  baseline_stats:
    cmd: python src/baseline_stats.py
    deps:
    - path: data/processed/titanic_preprocessed/processed_train.parquet
      hash: md5
      md5: df180f1353e74c0b63a82cbb76b481c7.dir
      size: 7579
      nfiles: 4
    - path: params.yaml
      hash: md5
      md5: f4923fdef6ab1424f1c43fe61411067c
      size: 1616
      isexec: true
    - path: src/baseline_stats.py
      hash: md5
      md5: 595765b3547c5c1b85bd07ba7603a145
      size: 2275
      isexec: true
    outs:
    - path: data/baseline_stats/baseline_stats.json
      hash: md5
      md5: 7783f43da5f8448bea123b0ab62d105b
      size: 1000
      isexec: true
  train_model:
    cmd: python src/train_model.py
    deps:
    - path: data/processed/titanic_preprocessed/processed_train.parquet
      hash: md5
      md5: df180f1353e74c0b63a82cbb76b481c7.dir
      size: 7579
      nfiles: 4
    - path: params.yaml
      hash: md5
      md5: f4923fdef6ab1424f1c43fe61411067c
      size: 1616
      isexec: true
    - path: src/train_model.py
      hash: md5
      md5: 66183d3bbf07e31a26d71568b5e4838d
      size: 9888
      isexec: true
    outs:
    - path: models/best_model
      hash: md5
      md5: 8473201b070424652c410f7518897be6.dir
      size: 24082
      nfiles: 20
  simulate_drift:
    cmd: python src/simulate_drift.py
    deps:
    - path: params.yaml
      hash: md5
      md5: f4923fdef6ab1424f1c43fe61411067c
      size: 1616
      isexec: true
    - path: src/simulate_drift.py
      hash: md5
      md5: 89c9a4118ef01ac57426590c88b67fe7
      size: 1893
      isexec: true
    outs:
    - path: data/processed/titanic_preprocessed_drifted/
      hash: md5
      md5: 0f5b1335d4eb6c37685323f26ca7ad45.dir
      size: 7719
      nfiles: 4
  drift_detection:
    cmd: python src/drift_detection.py
    deps:
    - path: data/baseline_stats/baseline_stats.json
      hash: md5
      md5: 7783f43da5f8448bea123b0ab62d105b
      size: 1000
      isexec: true
    - path: data/processed/titanic_preprocessed_drifted/
      hash: md5
      md5: 0f5b1335d4eb6c37685323f26ca7ad45.dir
      size: 7719
      nfiles: 4
    - path: params.yaml
      hash: md5
      md5: f4923fdef6ab1424f1c43fe61411067c
      size: 1616
      isexec: true
    - path: src/drift_detection.py
      hash: md5
      md5: dda9902b17f27be5a54857bd50b39478
      size: 4786
      isexec: true
    outs:
    - path: report/drift_report.json
      hash: md5
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
      isexec: true
  retrain:
    cmd: python src/automated_retrain.py
    deps:
    - path: data/raw/train.csv
      hash: md5
      md5: 2309cc5f04782ed9bb6016d9f4e381cf
      size: 61194
      isexec: true
    - path: params.yaml
      hash: md5
      md5: f4923fdef6ab1424f1c43fe61411067c
      size: 1616
      isexec: true
    - path: report/drift_report.json
      hash: md5
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
      isexec: true
    - path: src/automated_retrain.py
      hash: md5
      md5: 6e5f635b9473670a193d7797ef58930a
      size: 2773
      isexec: true
    - path: src/data_preprocessing.py
      hash: md5
      md5: 37c72a444708482c9e75413dc47617bf
      size: 3090
      isexec: true
    - path: src/drift_detection.py
      hash: md5
      md5: dda9902b17f27be5a54857bd50b39478
      size: 4786
      isexec: true
    - path: src/train_model.py
      hash: md5
      md5: 66183d3bbf07e31a26d71568b5e4838d
      size: 9888
      isexec: true
    outs:
    - path: report/retrain_drift_report.json
      hash: md5
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
      isexec: true
  inference:
    cmd: python src/inference.py
    deps:
    - path: data/processed/titanic_preprocessed/processed_test.parquet
      hash: md5
      md5: c37b4d378d076a8df166f7bd0adb44b1.dir
      size: 5186
      nfiles: 4
    - path: src/data_preprocessing.py
      hash: md5
      md5: 37c72a444708482c9e75413dc47617bf
      size: 3090
      isexec: true
    - path: src/inference.py
      hash: md5
      md5: 4ccaa26990f6c5c7654d8ed622b674e2
      size: 1878
      isexec: true
    outs:
    - path: data/predictions/predictions.csv
      hash: md5
      md5: 3e45da3ee6f089ff8d26bbdc9984ae1c
      size: 13466
      isexec: true
